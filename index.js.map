{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nexport default async function getImagesByQuery(search, pageNumber) {\n    const response = await axios.get(\"\", {\n        params: {\n            q: search,\n            key: \"49577455-ade522c1ef99167d118a0e5b7\",\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            page: pageNumber,\n            per_page: 15\n        }\n    })\n    \n    if (response.data.hits.length === 0) {\n        throw new Error('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n        return response.data;\n    }\n\n}","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function clearGallery() {\n    const gallery = document.querySelector(\".gallery\");\n    gallery.innerHTML = \"\";\n};\n\nexport function showLoader(){\n    const loader = document.querySelector(\".loader\");\n    loader.classList.add(\"load\")\n};\n\nexport function hideLoader(){\n    const loader = document.querySelector(\".loader\");\n    loader.classList.remove(\"load\")\n};\nlet gallery_images;\nexport default function addImages(data, page) {\n    const gallery = document.querySelector(\".gallery\");\n    const markup = data\n        .map((el) =>\n            `<li class=\"gallery-item\">\n                <div class=\"image-container\">\n                    <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n                        <img\n                        class=\"gallery-image\"\n                        src=\"${el.webformatURL}\"\n                        data-source=\"${el.largeImageURL}\"\n                        alt=\"${el.tags}\"\n                        />\n                    </a>\n                </div>\n                <ul class=\"info\">\n                    <li class=\"info-item\">\n                        <p class=\"info-tag\">Likes</p>\n                        <p>${el.likes}</p>\n                    </li>\n                    <li class=\"info-item\">\n                        <p class=\"info-tag\">Views</p>\n                        <p>${el.views}</p>\n                    </li>\n                    <li class=\"info-item\">\n                        <p class=\"info-tag\">Comments</p>\n                        <p>${el.comments}</p>\n                    </li>\n                    <li class=\"info-item\">\n                        <p class=\"info-tag\">Downloads</p>\n                        <p>${el.downloads}</p>\n                    </li>\n                </ul>\n            </li >`\n        )\n        .join(\"\");\n    \n    if (page > 1) {\n        gallery_images.destroy();\n    }\n    gallery.insertAdjacentHTML(\"beforeend\", markup)\n    gallery_images = new SimpleLightbox('.gallery a');\n    gallery_images.refresh();\n} \n\nexport function showLoadMoreButton() {\n    const loadMoreButton = document.querySelector(\"button[type='button']\");\n    loadMoreButton.classList.remove(\"visually-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    const loadMoreButton = document.querySelector(\"button[type='button']\");\n    loadMoreButton.classList.add(\"visually-hidden\");\n}","import getImagesByQuery from \"./js/pixabay-api\"\nimport addImages from \"./js/render-functions\"\nimport { clearGallery, showLoader, hideLoader, hideLoadMoreButton, showLoadMoreButton } from \"./js/render-functions\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst inputField = document.querySelector(\"input\");\nconst form = document.querySelector(\".form\");\nlet searchValue;\nlet pageNumber = 1;\n    \nform.addEventListener(\"submit\", async (ev) => {\n    ev.preventDefault();\n    searchValue = inputField.value.trim();\n    inputField.value = \"\";\n    hideLoadMoreButton();\n    if (searchValue != \"\") {\n        clearGallery();\n        showLoader();\n        pageNumber = 1;\n        try {\n            const data = await getImagesByQuery(searchValue, pageNumber);\n            addImages(data.hits, pageNumber);\n            if (Math.ceil(data.totalHits / 15) == pageNumber) {\n                throw new Error(\"We're sorry, but you've reached the end of search results.\")\n            }\n            showLoadMoreButton()\n            }\n            catch (error) {\n                iziToast.show({\n                    title: 'Error',\n                    message: error.message,\n                    color: 'red',\n                    position: \"topRight\"\n                });\n            }\n            finally{\n                hideLoader();\n            };\n    } else {\n        iziToast.show({\n                        title: 'Error',\n                        message: \"Input field is empty. Please provide search instructions.\",\n                        color: 'red',\n                        position: \"topRight\"\n                    });\n   }\n});\n\nconst loadMoreButton = document.querySelector(\"button[type='button']\");\nloadMoreButton.addEventListener(\"click\", async (ev) => {\n    ev.preventDefault();\n    pageNumber += 1;\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const data = await getImagesByQuery(searchValue, pageNumber);\n        addImages(data.hits, pageNumber);\n        const galleryItem = document.querySelector(\".gallery-item\");\n        const rectOfGalleryItem = galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            top: rectOfGalleryItem[\"height\"] * 2,\n            left: 0,\n            behavior: \"smooth\",\n        });\n        if (Math.ceil(data.totalHits / 15) == pageNumber) {\n            throw new Error(\"We're sorry, but you've reached the end of search results.\")\n        }\n        showLoadMoreButton()\n        }\n        catch (error){\n            iziToast.show({\n                title: 'Error',\n                message: error.message,\n                color: 'red',\n                position: \"topRight\"\n            });\n        }\n        finally{\n            hideLoader();\n        };\n})"],"names":["axios","getImagesByQuery","search","pageNumber","response","clearGallery","gallery","showLoader","hideLoader","gallery_images","addImages","data","page","markup","el","SimpleLightbox","showLoadMoreButton","hideLoadMoreButton","inputField","form","searchValue","ev","error","iziToast","loadMoreButton","rectOfGalleryItem"],"mappings":"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"}